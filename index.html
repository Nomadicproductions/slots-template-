<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CannaBus Slots Game</title>
  <style>
    /* === Loading Screen Styles === */
    #loading-overlay {
      position: fixed;
      z-index: 9999;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: none; /* asset reference removed */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: opacity 0.5s;
    }
    #progress-container {
      width: 50vw;
      max-width: 400px;
      height: 32px;
      background: rgba(0,0,0,0.3);
      border-radius: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      margin-bottom: 24px;
      overflow: hidden;
    }
    #progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffd700 0%, #e25822 100%);
      border-radius: 16px 0 0 16px;
      transition: width 0.3s;
    }
    #progress-text {
      color: #fffbe5;
      font-size: 1.4em;
      text-shadow: 1px 1px 5px #000;
      font-family: 'Arial', sans-serif;
    }

    /* === Slots Game Styles === */
    body { background: #181f11; min-height: 100vh; margin: 0; display: flex; flex-direction: column; align-items: center; font-family: 'Segoe UI', Arial, sans-serif; }
    .slots-bg { position: relative; width: 500px; height: 750px; background: none; box-shadow: 0 6px 40px #011a, 0 1px 15px #000a inset; margin-top: 40px; }
    .paylines-svg { pointer-events: none; position: absolute; left: 52px; top: 315px; width: 395px; height: 215px; z-index: 1; }
    .reels-area { position: absolute; left: 52px; top: 315px; width: 395px; height: 215px; display: flex; justify-content: space-between; z-index: 2; pointer-events: none; }
    .reel-column { width: 120px; height: 215px; overflow: hidden; position: relative; display: flex; flex-direction: column; align-items: center; background: none; }
    .reel-strip { position: absolute; top: 0; left: 0; width: 120px; transition: top 0.25s cubic-bezier(.22,1.5,.6,1); }
    .sprite { width: 120px; height: 72px; display: flex; align-items: center; justify-content: center; pointer-events: none; box-sizing: border-box; }
    .sprite img { max-width: 100%; max-height: 100%; display: block; image-rendering: pixelated; pointer-events: none; }
    .sprite.gold-highlight { box-shadow: 0 0 12px 3px gold, 0 0 0 3px gold; border: 3px solid gold; border-radius: 12px; }
    .bottom-ui { position: absolute; left: 0; right: 0; bottom: 42px; display: flex; justify-content: center; gap: 20px; z-index: 3; pointer-events: auto; }
    .spin-btn { padding: 11px 35px; font-size: 1.25rem; background: linear-gradient(180deg, #ffed6b 60%, #ffbb32 100%); color: #222; border: none; border-radius: 16px; cursor: pointer; font-weight: bold; box-shadow: 0 2px 4px #0006, 0 1px 2px #fff7 inset; border: 2.5px solid #947d37; letter-spacing: 1.2px; transition: background 0.2s; }
    .spin-btn:active { background: #ffe857; }
    .spin-btn:disabled { background: #aaa; color: #888; cursor: not-allowed; border-color: #888; }
    .balance-ui { padding: 8px 16px; border-radius: 8px; background: #233711d9; color: #fff; border: 1.5px solid #f9e46c77; font-weight: bold; font-size: 1.1rem; min-width: 110px; text-align: center; }
    .bet-ui { padding: 8px 12px; border-radius: 8px; background: #233711d9; color: #fff; border: 1.5px solid #f9e46c77; font-weight: bold; font-size: 1.1rem; min-width: 110px; text-align: center; outline: none; }
    .paylines-ui { padding: 8px 12px; border-radius: 8px; background: #233711d9; color: #fff; border: 1.5px solid #f9e46c77; font-weight: bold; font-size: 1.1rem; min-width: 110px; text-align: center; outline: none; }
    .win-msg { position: absolute; width: 100%; top: 240px; left: 0; text-align: center; font-size: 1.7rem; color: #ffe857; font-weight: bold; text-shadow: 2px 2px 6px #000, 0 0 10px #947d37; z-index: 10; pointer-events: none; opacity: 0; transition: opacity 0.3s; }
    .win-msg.show { opacity: 1; }
    .payout-table {
      margin-top: 30px;
      background: #222f19;
      color: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 16px #0008;
      padding: 20px 30px;
      font-size: 1.15rem;
      min-width: 340px;
      max-width: 98vw;
    }
    .payout-table h2 { margin: 0 0 12px 0; font-size: 1.3rem; color: #ffed6b; }
    .payout-table-row { display: flex; align-items: center; margin: 0 0 8px 0; }
    .payout-table-row img { width: 48px; height: 48px; object-fit: contain; margin-right: 12px; border-radius: 6px; border: 1px solid #fff3; background: #181f11; }
    .payout-table-row .symbol-name { min-width: 110px; }
    .payout-table-row .symbol-payout { color: #ffed6b; font-weight: 600; margin-left: auto; }
    #debug-algo {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.7);
      color: #fff;
      padding: 8px 18px;
      border-radius: 8px;
      font-size: 1.05em;
      z-index: 100;
      min-width: 220px;
      pointer-events: auto;
      font-family: monospace;
      box-shadow: 0 2px 6px #0007;
      letter-spacing: 0.03em;
    }
    #debug-algo b { color: #ffed6b; }
  </style>
</head>
<body>
  <!-- === Loading Screen Overlay === -->
  <div id="loading-overlay">
    <div id="progress-container">
      <div id="progress-bar"></div>
    </div>
    <div id="progress-text">Loading... 0%</div>
  </div>

  <!-- === Main Game Area === -->
  <div id="game-container" style="display:none;">
    <div class="slots-bg">
      <!-- DEBUG PANEL -->
      <div id="debug-algo">
        <span>Mode:</span> <b id="debug-mode">...</b><br>
        <span>Switch at:</span> <b id="debug-thresh">...</b><br>
        <span>Start Bal:</span> <b id="debug-bal">...</b>
      </div>
      <svg class="paylines-svg" id="paylinesSVG" width="395" height="215"></svg>
      <div class="win-msg" id="winMsg"></div>
      <div class="reels-area" id="reelsArea">
        <div class="reel-column" id="reel0"><div class="reel-strip"></div></div>
        <div class="reel-column" id="reel1"><div class="reel-strip"></div></div>
        <div class="reel-column" id="reel2"><div class="reel-strip"></div></div>
      </div>
      <div class="bottom-ui">
        <div class="balance-ui" id="balance">Balance: $100.00</div>
        <select class="bet-ui" id="betAmount"></select>
        <!-- Paylines Dropdown will be inserted here by JS -->
        <button class="spin-btn" id="spinBtn">SPIN</button>
      </div>
    </div>
    <div class="payout-table" id="payoutTable"></div>
  </div>

  <script>
    // ===== LOADING SCREEN LOGIC =====
    // All asset image references removed
    const assetImages = [];
    function preloadImages(imageUrls, onProgress, onComplete) {
      let loaded = 0;
      const total = imageUrls.length;
      if (total === 0) { onComplete(); return; }
      imageUrls.forEach(url => {
        const img = new Image();
        img.onload = img.onerror = () => {
          loaded++;
          onProgress(loaded, total);
          if (loaded === total) onComplete();
        };
        img.src = url;
      });
    }
    function updateProgressBar(loaded, total) {
      const percent = Math.round((loaded / total) * 100);
      document.getElementById("progress-bar").style.width = percent + "%";
      document.getElementById("progress-text").textContent = `Loading... ${percent}%`;
    }
    function showGameContainer() {
      const overlay = document.getElementById("loading-overlay");
      overlay.style.opacity = 0;
      setTimeout(() => {
        overlay.style.display = "none";
        document.getElementById("game-container").style.display = "";
      }, 500);
    }
    window.addEventListener("DOMContentLoaded", () => {
      preloadImages(assetImages, updateProgressBar, showGameContainer);
    });

    // ===== SLOTS GAME CODE =====
    // === SYMBOLS DATA ===
    const symbols = [
      { name: 'file_0000', img: '', payouts: [0, 2, 20], winChance: 0.05, lossChance: 0.01, display: "Ace" },
      { name: 'd476a083', img: '', payouts: [0, 1.5, 15], winChance: 0.055, lossChance: 0.012, display: "King" },
      { name: '124f55a4', img: '', payouts: [0, 2, 20], winChance: 0.06, lossChance: 0.015, display: "Queen" },
      { name: '057f11a8', img: '', payouts: [0, 2.5, 25], winChance: 0.055, lossChance: 0.012, display: "Hearts" },
      { name: 'row-1-column-1', img: '', payouts: [0, 4, 40], winChance: 0.05, lossChance: 0.01, display: "Weed leaf" },
      { name: 'row-1-column-2', img: '', payouts: [0, 2, 20], winChance: 0.06, lossChance: 0.015, display: "Smoke Clouds" },
      { name: 'row-1-column-3', img: '', payouts: [0, 3, 30], winChance: 0.065, lossChance: 0.017, display: "Joint" },
      { name: 'row-2-column-1', img: '', payouts: [0, 3, 30], winChance: 0.06, lossChance: 0.015, display: "Thc Juce" },
      { name: 'row-2-column-2', img: '', payouts: [0, 3.5, 35], winChance: 0.055, lossChance: 0.012, display: "Jar Of Weed" },
      { name: 'row-2-column-3', img: '', payouts: [0, 3, 30], winChance: 0.06, lossChance: 0.015, display: "Thc Cookie" },
      { name: 'row-3-column-1', img: '', payouts: [0, 5, 50], winChance: 0.05, lossChance: 0.01, display: "Brain High" },
      { name: 'row-3-column-3', img: '', payouts: [0, 2, 20], winChance: 0.06, lossChance: 0.015, display: "High Frog" },
      { name: 'row-3-column-2', img: '', payouts: [0, 4, 40], winChance: 0.05, lossChance: 0.01, display: "Thc Oil" },
      { name: 'row-4-column-1 (1)', img: '', payouts: [0, 2, 20], winChance: 0.06, lossChance: 0.015, display: "Clubs" },
      { name: 'row-4-column-2', img: '', payouts: [0, 5, 50], winChance: 0.05, lossChance: 0.01, display: "Diamonds" },
      { name: 'row-4-column-3', img: '', payouts: [0, 2, 20], winChance: 0.06, lossChance: 0.015, display: "Spades" },
      { name: 'row-1-column-1 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "1" },
      { name: 'row-1-column-2 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "2" },
      { name: 'row-1-column-3 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "3" },
      { name: 'row-2-column-1 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "4" },
      { name: 'row-2-column-2 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "5" },
      { name: 'row-2-column-3 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "6" },
      { name: 'row-3-column-1 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "7" },
      { name: 'row-3-column-2 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "8" },
      { name: 'row-3-column-3 (1)', img: '', payouts: [0, 1, 15], winChance: 0.07, lossChance: 0.03, display: "9" }
    ];

    // --- Dynamic Win/Loss Algorithm State ---
    // ... (rest of your original JS code unchanged, except where it referenced symbol images or asset paths)

    // In spinReel, showGrid, payout table, etc, <img src="${symbols[idx].img}" ...> will now just show empty images.
    // This is correct for now, as you will add your new asset references in the next step.
    // All game logic, payout, UI, and structure are untouched.
    // (No asset/image path remains anywhere.)
    // ... (rest of your original JS logic remains as in your file)
    // (For brevity, not repeating the rest here since it’s unchanged except for removed asset references.)
    // ... (see your original for full code)
  </script>
</body>
</html>
